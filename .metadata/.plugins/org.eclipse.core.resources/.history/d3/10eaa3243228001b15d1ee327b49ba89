package com.org.dxc.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.org.dxc.dao.AdminRepository;
import com.org.dxc.dao.BidderRepository;
import com.org.dxc.dao.BiddingDetailsRepository;
import com.org.dxc.dao.LeaderboardRepository;
import com.org.dxc.dao.MatchDetailsRepository;
import com.org.dxc.dao.TeamDetailsRepository;
import com.org.dxc.dao.TournamentRepository;
import com.org.dxc.model.Admin;
import com.org.dxc.model.Bidder;
import com.org.dxc.model.Leaderboard;
import com.org.dxc.model.MatchDetails;
import com.org.dxc.model.TeamDetails;
import com.org.dxc.model.Tournament;

@Service
public class IPLServiceImp implements IPLService {
	
@Autowired
AdminRepository adminRepository;

@Autowired
BidderRepository bidderRepository;

@Autowired
BiddingDetailsRepository biddingDetails;

@Autowired
LeaderboardRepository leaderboardRepository;

@Autowired
MatchDetailsRepository matchDetailsRepository;

@Autowired
TeamDetailsRepository teamDetailsRepository;

@Autowired
TournamentRepository tournamentRepository;

@Override
public Admin adminLogin(String userName,String password) {
	// TODO Auto-generated method stub
	Admin admin=adminRepository.findByUserName(userName,password);
    if(admin!=null) {
    	return admin;
    }else {
    	return null;
    }
}

@Override
public Bidder bidderSignUp(Bidder bidder) {
	// TODO Auto-generated method stub
	return bidderRepository.save(bidder);
}

@Override
public Bidder bidderLogin(String email,String password) {
	// TODO Auto-generated method stub
	Bidder bidder=bidderRepository.getBidderByEmailAndPassword(email, password);
	if(bidder!=null) {
		return bidder;
	}else {
		return null;
	}
}

@Override
public List<Tournament> getTournamentAll() {
	// TODO Auto-generated method stub
	return tournamentRepository.findAll();
}

@Override
public TeamDetails getTeamDetails(int id) {
	// TODO Auto-generated method stub
	return teamDetailsRepository.findById(id).get();
}

@Override
public MatchDetails getMatchDetails(int id) {
	// TODO Auto-generated method stub
	return matchDetailsRepository.findById(id).get();
}

@Override
public List<Leaderboard> getLeaderboard() {
	// TODO Auto-generated method stub
	return leaderboardRepository.findAll();
}

@Override
public Tournament addTournament(Tournament tournament) {
	// TODO Auto-generated method stub
	return tournamentRepository.save(tournament);
}

@Override
public Tournament updateTournament(Tournament tournament) {
	// TODO Auto-generated method stub
	Tournament toUpdate=tournamentRepository.findById(tournament.getTournamentId()).get();
	toUpdate.setNumberOfMatchesCompleted(tournament.getNumberOfMatchesCompleted());
	return tournamentRepository.save(toUpdate);
}

@Override
public MatchDetails resultDeclare(MatchDetails result) {
	// TODO Auto-generated method stub
	MatchDetails declareResult=matchDetailsRepository.findById(result.getMatchId()).get();
	declareResult.setWinner(result.getWinner());
	return matchDetailsRepository.save(declareResult);
}

@Override
public List<TeamDetails> getTeamDetails() {
	// TODO Auto-generated method stub
	return teamDetailsRepository.findAll();
}

}
